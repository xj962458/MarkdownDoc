## 一、创建容器

```bash
docker run -itd --name=jupyterhub -p 8000:8000 --privileged=true centos:7 /usr/sbin/init
```



## 二、安装软件

先进入容器：

```bash
docker exec -it jupyterhub bash
```



更新软件源：

```bash
yum update -y && yum upgrade -y
```



安装必要软件：

```bash
yum install vim net-tools wget -y
```



下载安装nodejs和npm

[下载 | Node.js 中文网 (nodejs.cn)](http://nodejs.cn/download/)

```bash
wget https://npmmirror.com/mirrors/node/v16.17.0/node-v16.17.0-linux-x64.tar.xz
```

```bash
tar -xvJf  node-v16.17.0-linux-x64.tar.xz
```

```bash
mv node-v16.17.0-linux-x64 /opt/nodejs
```

```bash
vim /etc/bashrc
# 添加以下内容
export PATH=$PATH:/opt/nodejs/bin

# 然后使其生效
source /etc/profile
```



下载安装miniconda3

```bash
# 下载
wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-py39_4.12.0-Linux-x86_64.sh

# 赋予可执行权限
chmod +x ./Miniconda3-py39_4.12.0-Linux-x86_64.sh

# 执行安装
./Miniconda3-py39_4.12.0-Linux-x86_64.sh
```

执行安装后，有几点注意：

* 刚执行的时候是服务条款，一路按`Enter`，然后要输入的时候输入`yes`即可；

* 接下来会让确认路径，默认为`~/miniconda3`，不要装在`root`用户目录下，建议装在`/opt/miniconda3`目录下，装`root`目录下之后会出现很多问题；

* 最后询问是否初始化，选择`yes`；

* 安装完成后重启终端，然后再进去，再进入发现终端`(base)`开头，说明安装成功

  ![image-20220912201812495](http://doc.xjfyt.top/markdown_img/20220912201813.png)



## 三、换源

```bash
npm config set registry http://registry.npmmirror.com  # npm换淘宝源
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple # pip换清华源

# conda换源
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/  
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/    
conda config --set show_channel_urls yes 
```



### 四、安装一些别的东西

```bash
npm install -g configurable-http-proxy

conda install pycurl    # pycurl必须用conda装，用pip装会报错，或用源码编译安装，没有pycurl就会导致普通用户无法开启jupyterlab
```



## 五、解决终端不能正常显示中文的问题

